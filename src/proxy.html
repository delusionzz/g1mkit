<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta content="width=device-width,initial-scale=1" name="viewport" />
    <title>Play G1mkit! - Enter game code here | G1mkit</title>
    <link href=./favicon.png rel=icon>
    <link href="style.css" rel="stylesheet" />
    <link rel="prefetch" href="/sj/scramjet.worker.js" />
    <link rel="prefetch" href="/sj/scramjet.shared.js" />
    <script src="/js/draggabilly.min.js"></script>

    <style>
      body {
        background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
          url(/background.png) 0 0 repeat;
      }
      dialog {
        border: none !important;
        outline: none !important;
        box-shadow: 0 0 #0000, 0 0 #0000, 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        padding: 1.6rem;
      }
      dialog::backdrop {
        background: rgba(0, 0, 0, 0.5);
      }

      .blurple {
        color: #5865f2;
      }
    </style>
  </head>
  <body class="w-full flex items-center justify-center min-h-screen">
    <div
      class="rounded-md bg-white flex flex-col gap-4 h-full items-center justify-center p-6 w-[29%]"
      id="main"
    >
      <div class="flex flex-col items-center justify-center gap-2 w-full">
        <img src=/svgLogo.svg
        style=width:70%;max-width:290px;vertical-align:middle;line-height:1.5>
        <p class="font-bold text-gray-700">Barebones and simple.</p>
      </div>
      <input
        class="rounded-md font-bold w-full border-[3px] border-gray-500/70 h-16 outline-none p-2 placeholder:text-gray-500 text-3xl text-center transition-all"
        placeholder="Enter a term or url"
        id="pinput"
      />
      <div class="flex gap-2 w-full">
        <button
          class="rounded-md font-bold w-full bg-[#1E076B] h-14 leading-[1.5] px-[13px] py-[8px] text-[20px] text-white"
          id="psearch"
        >
          <obf-text>Search</obf-text>
        </button>
        <button
          class="text-xl bg-[#1E076B] py-2 px-4 hover:bg-[#2c1772] transition-all transform hover:scale-105 rounded-md text-white"
          id="settingsBtn"
        >
          <img
            src="/assets/settings.svg"
            alt="settings"
            class="w-6 h-6 fill-white text-white stroke-white"
          />
        </button>
      </div>
    </div>
    <div
      class="w-full min-h-screen flex-col hidden items-center justify-center"
      id="pmain"
    >
      <nav
        class="w-fit h-16 bg-white/50 items-center justify-center flex p-4 space-x-4 rounded-lg absolute"
      >
        <img
          src="/assets/house.svg"
          alt="house"
          id="ph"
          class="w-6 h-6 cursor-pointer"
        />
        <input
          class="rounded-md font-bold w-7/12 border-[3px] border-gray-500/70 outline-none p-2 placeholder:text-gray-500 text-xl text-center transition-all"
          placeholder="Enter a term or url"
          id="ppinput"
        />
        <button
          class="rounded-md font-bold bg-[#1E076B] leading-[1.5] px-[13px] py-[8px] text-[20px] text-white"
          id="ppsearch"
        >
          <obf-text>Search</obf-text>
        </button>
        <img
          src="/assets/grid.svg"
          alt="draggable handle"
          class="w-6 h-6 cursor-move handle stroke-white text-white fill-white"
        />
      </nav>
      <iframe
        id="p"
        src=""
        style="width: 100%; height: 100vh; border: none"
      ></iframe>
    </div>
    <a
      href="/api/info"
      target="_blank"
      class="fixed flex items-center justify-center bottom-4 right-4"
    >
      <obf-text class="text-white">Join the Discord</obf-text>&nbsp;
      <obf-text class="text-white">to get the Weekly password!</obf-text>
    </a>
    <dialog class="rounded-md" id="popup">
      <!-- content -->
      <div class="flex flex-col w-full px-2" style="gap: 1.25rem">
        <h1 class="text-center text-2xl font-bold">
          Join the&nbsp;<a
            class="border-none outline-none"
            href="/api/info"
            target="_blank"
            ><obf-text class="blurple">Discord</obf-text></a
          >&nbsp;to get the Weekly password
        </h1>
        <button
          class="w-full text-xl text-center bg-[#1E076B] hover:bg-[#2c1772] transition-all transform hover:scale-105 rounded-md text-white"
          id="dialogClose"
          style="padding: 0.5rem; font-size: 1.25rem; line-height: 1.75rem"
        >
          Let me in!
        </button>
      </div>
    </dialog>

    <dialog class="rounded-md w-3/12" id="settings">
      <!-- content -->
      <div class="flex flex-col w-full px-2" style="gap: 1.25rem">
        <h1 class="text-center text-2xl font-bold">Settings</h1>
        <div class="flex flex-col gap-2">
          <label for="pselect" class="text-xl font-bold"
            ><obf-text>Proxy</obf-text></label
          >
          <select
            id="pselect"
            class="w-full bg-transparent placeholder:text-slate-400 text-slate-700 border border-slate-200 rounded pl-3 pr-8 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-400 shadow-sm focus:shadow-md appearance-none cursor-pointer"
          >
            <option value="uv">Ultraviolet</option>
            <option value="sj">Scramjet</option>
          </select>
        </div>
        <div class="w-full flex gap-2">
          <button
            class="w-full text-xl text-center bg-[#1E076B] hover:bg-[#2c1772] transition-all transform hover:scale-105 rounded-md text-white"
            id="settingsClose"
            style="padding: 0.5rem; font-size: 1.25rem; line-height: 1.75rem"
            onclick="settingsDialog.close()"
          >
            Close
          </button>
          <button
            class="w-full text-xl text-center bg-[#1E076B] hover:bg-[#2c1772] transition-all transform hover:scale-105 rounded-md text-white"
            id="settingsSave"
            style="padding: 0.5rem; font-size: 1.25rem; line-height: 1.75rem"
          >
            Save
          </button>
        </div>
      </div>
    </dialog>

    <script>
      const dialog = document.querySelector("#popup");

      dialog.showModal();

      document.querySelector("#dialogClose").addEventListener("click", () => {
        dialog.close();
      });
    </script>

    <script>
      class ObfTextElement extends HTMLElement {
        connectedCallback() {
          const content = this.textContent.trim();
          const classList = Array.from(this.classList);
          this.innerHTML = "";

          for (const char of content) {
            const span = document.createElement("span");
            span.textContent = char;

            classList.forEach((cls) => span.classList.add(cls));

            this.appendChild(span);
          }
        }
      }

      // Define the custom element
      customElements.define("obf-text", ObfTextElement);
    </script>
    <script src="/baremux/index.js" defer></script>
    <script src="/sj/scramjet.controller.js"></script>
    <script src="settings.js" defer></script>
    <script src="script.js" defer></script>
  </body>
</html>
